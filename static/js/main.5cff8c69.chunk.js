(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3OYic"}},12:function(e,t,a){e.exports={Button:"Button_Button__V6QLn"}},13:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2ix_z",Modal:"Modal_Modal__20bIs"}},19:function(e,t,a){},20:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(8),c=a.n(o),s=(a(19),a(3)),i=a(4),l=a(6),u=a(5),h=(a(20),a(7)),d=a.n(h),m=a(0),p=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={sarch:""},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("header",{className:d.a.Searchbar,children:Object(m.jsxs)("form",{onSubmit:this.props.onSubmit,className:d.a.SearchForm,children:[Object(m.jsx)("input",{type:"text",name:"picName",value:this.state.search,className:d.a.SearchForm_input,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"}),Object(m.jsx)("button",{type:"submit",className:d.a.SearchForm_button})]})})})}}]),a}(r.Component),b=a(10),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={response:[],error:null},e.fetchImagesByName=function(){var t=e.props,a=t.search,r=t.page,n="\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u043c\u0443 \u0441\u043b\u043e\u0432\u0443 ".concat(a," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");return fetch("https://pixabay.com/api/?q=".concat(a,"&page=").concat(r,"&key=").concat("21885958-186cb9f8de90f78c5ca194f62","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()})).then((function(t){return 0===t.hits.length?Promise.reject(new Error(n)):e.setState((function(e){return{response:[].concat(Object(b.a)(e.response),Object(b.a)(t.hits))}}))})).catch((function(e){return alert(e.message)})).finally((function(){e.props.hideLoader()}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=document.querySelector("ul"),t=this.props.openModal;this.fetchImagesByName(),e.addEventListener("click",t)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,r=a.search,n=a.page,o=a.scroll;e.search!==r&&(this.setState({response:[]}),this.fetchImagesByName()),e.page!==n&&this.fetchImagesByName().then(o)}},{key:"componentWillUnmount",value:function(){var e=document.querySelector("ul"),t=this.props.openModal;e.removeEventListener("click",t)}},{key:"render",value:function(){return this.state.response.map((function(e){var t=e.id,a=e.webformatURL,r=e.tags,n=e.largeImageURL;return Object(m.jsx)("li",{className:j.ImageGalleryItem,children:Object(m.jsx)("a",{children:Object(m.jsx)("img",{src:a,alt:r,"data-big_image":n,className:j.ImageGalleryItem_image})})},t)}))}}]),a}(r.Component),f=a(11),v=a.n(f),O=a(12),g=a.n(O);function y(e){var t=e.onClick;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{type:"button",className:g.a.Button,onClick:t,children:"Load more"})})}var S=a(13),_=a.n(S),x=document.querySelector("#modal-root"),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).ref=n.a.createRef(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.ref.current.addEventListener("click",this.props.closeModal),window.addEventListener("keydown",this.props.closeModal)}},{key:"componentWillUnmount",value:function(){this.ref.current.removeEventListener("click",this.props.closeModal),window.removeEventListener("keydown",this.props.closeModal)}},{key:"render",value:function(){return Object(o.createPortal)(Object(m.jsx)("div",{ref:this.ref,className:_.a.Overlay,children:Object(m.jsx)("img",{src:this.props.url,alt:""})}),x)}}]),a}(r.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={page:1,modalUrl:"",modalIsOpen:!1},e.scroll=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.increasePage=function(){e.setState((function(e){return{page:e.page+1}}))},e.openModal=function(t){"IMG"===t.target.nodeName&&e.setState({modalIsOpen:!0,modalUrl:t.target.dataset.big_image})},e.closeModal=function(t){"DIV"!==t.target.nodeName&&"Escape"!==t.code||e.setState({modalIsOpen:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.modalIsOpen,a=e.modalUrl,r=e.page,n=this.props,o=n.search,c=n.hideLoader;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsx)("ul",{className:v.a.ImageGallery,children:Object(m.jsx)(j,{openModal:this.openModal,hideLoader:c,search:o,page:r,scroll:this.scroll})})}),Object(m.jsx)(y,{onClick:this.increasePage}),t&&Object(m.jsx)(w,{url:a,closeModal:this.closeModal})]})}}]),a}(r.Component),I=a(14),M=a.n(I);function L(){return Object(m.jsx)("div",{children:Object(m.jsx)(M.a,{type:"ThreeDots",color:"#18166b",height:80,width:80})})}var N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={search:"",loaderAreShown:!1},e.handleSubmit=function(t){var a=t.target[0].value;e.setState((function(e){return{loaderAreShown:!0}})),t.preventDefault(),""!==a.trim()?(e.setState({search:a}),t.target[0].value=""):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a")},e.showLoader=function(){e.setState((function(e){return{loaderAreShown:!0}}))},e.hideLoader=function(){e.setState((function(e){return{loaderAreShown:!1}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.search,a=e.loaderAreShown,r=""===this.state.search;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{onSubmit:this.handleSubmit}),a&&Object(m.jsx)(L,{}),!r&&Object(m.jsx)(k,{search:t,hideLoader:this.hideLoader})]})})}}]),a}(r.Component);c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__3PG1u",SearchForm:"Searchbar_SearchForm__12b27",SearchForm_button:"Searchbar_SearchForm_button__3Ku1i","SearchForm_button-label":"Searchbar_SearchForm_button-label__2yKRu",SearchForm_input:"Searchbar_SearchForm_input__1sNy6"}}},[[42,1,2]]]);
//# sourceMappingURL=main.5cff8c69.chunk.js.map